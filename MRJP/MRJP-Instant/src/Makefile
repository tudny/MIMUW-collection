## File generated by the BNF Converter (bnfc 2.9.4.1).
## ## And edited by hand by Aleksander Tudruj.

# Makefile for building the parser and test program.

GHC        = ghc
GHC_OPTS   = -odir Target -hidir Target -Wall -Werror -Wextra -O2
HAPPY      = happy
HAPPY_OPTS = --array --info --ghc --coerce
ALEX       = alex
ALEX_OPTS  = --ghc

SRCS = AbstractSyntaxTree.hs\
		Exec.hs\
		Utils.hs\


# List of goals not corresponding to file names.

.PHONY : all clean distclean

# Default goal.

all : Target Target/insc_jvm Target/insc_llvm

# Rules for building the parser.

Target : 
	mkdir -p Target

Instant/Abs.hs Instant/Lex.x Instant/Par.y Instant/Print.hs Instant/Test.hs : Instant.cf
	bnfc --haskell -d --functor Instant.cf

%.hs : %.y
	${HAPPY} ${HAPPY_OPTS} $<

%.hs : %.x
	${ALEX} ${ALEX_OPTS} $<

Target/insc_jvm : Target Instant/Abs.hs Instant/Lex.hs Instant/Par.hs Instant/Print.hs InscJvm.hs JvmUtils.hs ${SRCS}
	${GHC} ${GHC_OPTS} -main-is InscJvm InscJvm.hs -o $@

Target/insc_llvm : Target Instant/Abs.hs Instant/Lex.hs Instant/Par.hs Instant/Print.hs InscLlvm.hs LlvmUtils.hs ${SRCS}
	${GHC} ${GHC_OPTS} -main-is InscLlvm InscLlvm.hs -o $@

# Rules for cleaning generated files.

clean :
	-rm -rf Target/

distclean : clean

# EOF
